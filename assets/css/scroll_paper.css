/* =======================================================================================
    SCROLL_PAPER.CSS (DEDICATED, SCOPED)
    Scope: html[data-page="scroll_paper"]
    ======================================================================================= */
.ibekume-img {
    width: 100%;
    height: auto;
    border-radius: var(--paper-radius);
    box-shadow: var(--paper-shadow);
    margin-top: 16px;
}
.tpman-img {
    width: 100%;
    height: auto;
    border-radius: var(--paper-radius);
    box-shadow: var(--paper-shadow);
    margin-top: 16px;
}
.dsa-img {
    width: 100%;
    height: auto;
    border-radius: var(--paper-radius);
    box-shadow: var(--paper-shadow);
    margin-top: 16px;
}
.kgs-img {
    width: 100%;
    height: auto;
    border-radius: var(--paper-radius);
    box-shadow: var(--paper-shadow);
    margin-top: 16px;
}
.cons-img {
    width: 100%;
    height: auto;
    border-radius: var(--paper-radius);
    box-shadow: var(--paper-shadow);
    margin-top: 16px;
}
.volunteer-img {
    width: 100%;
    height: auto;
    border-radius: var(--paper-radius);
    box-shadow: var(--paper-shadow);
    margin-top: 16px;
}
.now-img {
    width: 100%;
    height: auto;
    border-radius: var(--paper-radius);
    box-shadow: var(--paper-shadow);
    margin-top: 16px;
}
.values-img {
    width: 100%;
    height: auto;
    border-radius: var(--paper-radius);
    box-shadow: var(--paper-shadow);
    margin-top: 16px;
}
.scrolly-paper-wrap {
    position: relative;
    isolation: isolate;
    width: min(100%, var(--container));
    margin-inline: auto;
    padding: clamp(16px, 4vw, 28px);
    box-shadow: var(--shadow);
    background: var(--surface);
}

.scrolly-paper-wrap::before {
    content: "";
    position: absolute;
    inset: 0;
    border-radius: inherit;
    pointer-events: none;
    z-index: 0;
    background-image: url("/assets/images/checker.png");
    background-repeat: repeat;
    background-size: 22px 22px;
    opacity: 0.06;
}

body.theme-light .scrolly-paper-wrap::before {
    opacity: 0.08;
}

.scrolly-paper-wrap>* {
    position: relative;
    z-index: 1;
}

.umudyke {
    max-width: 100%;
    max-height: 100%;
    border-radius: var(--paper-radius);
    box-shadow: var(--paper-shadow);
}

@layer scroll_paper {
    html[data-page="scroll_paper"] {
        --paper-border: var(--border);
        --paper-bg: var(--surface);
        --paper-text: var(--text);
        --paper-muted: var(--accent-2);
        --paper-radius: var(--radius-md);
        --paper-shadow: var(--shadow);
        --paper-column-gap: 24px;
        --paper-column-rule: 1px solid var(--border);
        --card-gap: 24px;
        --card-media-ratio: 16/9;
        --card-title-minlines: 2;
        --card-blurb-lines: 3;
        --card-body-min: 0px;
    }

    html[data-page="scroll_paper"] body {
        background: var(--bg);
        color: var(--paper-text);
        gap: 24px;
    }

    html[data-page="scroll_paper"] .view-header {
        padding-block: 16px 8px;
        border-bottom: 1px solid var(--paper-border);
    }

    html[data-page="scroll_paper"] #story-heading {
        font-size: clamp(28px, 5.5vw, 48px);
        line-height: 1.1;
        font-weight: 900;
        letter-spacing: 0.2px;
        background-image: linear-gradient(180deg, var(--paper-text) 0%, var(--blue-400) 100%);
        position: relative;
        z-index: 1;
        display: inline-flex;
        align-items: center;
        gap: 0.5rem;
        flex-direction: row-reverse;
    }

    html[data-page="scroll_paper"] .enjoychain,
    html[data-page="scroll_paper"] .goated {
        width: 50px;
        height: 50px;
        border-radius: 25%;
        vertical-align: middle;
    }

    html[data-page="scroll_paper"] .goated {
        margin-left: 25px;
    }

    html[data-page="scroll_paper"] .view-subtitle {
        margin: 8px 0 0 0;
        font-size: clamp(15px, 2.4vw, 18px);
        color: var(--paper-muted);
        line-height: 1.4;
        max-width: 60ch;
        white-space: nowrap;
        overflow: hidden;
        text-overflow: ellipsis;
    }

    html[data-page="scroll_paper"] .view-subtitle::after {
        content: "";
        display: inline-block;
        width: 2px;
        height: 1.2em;
        margin-left: 6px;
        background: linear-gradient(180deg, var(--primary), var(--secondary));
        vertical-align: -0.15em;
        animation: caret-blink 1s steps(2, start) infinite;
    }

    @keyframes caret-blink {
        50% {
            opacity: 0;
        }
    }

    html[data-page="scroll_paper"] .carousel {
        margin-block: 24px 40px;
        position: relative;
        user-select: none;
    }

    html[data-page="scroll_paper"] .carousel-viewport {
        overflow: hidden;
        border-radius: var(--paper-radius);
        border: 1px solid var(--paper-border);
        background: var(--paper-bg);
        outline: none;
        position: relative;
    }

    html[data-page="scroll_paper"] .carousel-track {
        display: flex;
        gap: var(--card-gap);
        padding: 16px;
        will-change: transform;
        transform: translate3d(0, 0, 0);
        transition: var(--transition);
    }

    html[data-page="scroll_paper"] .carousel-slide {
        flex: 0 0 calc(50% - var(--card-gap) / 2);
        list-style: none;
        display: flex;
    }

    html[data-page="scroll_paper"] .story-card {
        display: grid;
        grid-template-rows: auto 1fr;
        background: var(--paper-bg);
        border-radius: var(--paper-radius);
        border: 1px solid var(--paper-border);
        box-shadow: var(--paper-shadow);
        overflow: hidden;
        transition: var(--transition);
        width: 100%;
    }

    html[data-page="scroll_paper"] .story-card:hover,
    html[data-page="scroll_paper"] .story-card:focus-within {
        transform: translateY(-2px);
        border-color: var(--blue-400);
    }

    html[data-page="scroll_paper"] .story-media {
        display: block;
        aspect-ratio: var(--card-media-ratio);
        overflow: hidden;
        background: linear-gradient(135deg, var(--primary-soft), var(--secondary-soft));
        position: relative;
        z-index: 1;
    }

    html[data-page="scroll_paper"] .story-media img {
        width: 100%;
        height: 100%;
        object-fit: contain;
        filter: saturate(1.05) contrast(1.02);
        transform: scale(1.002);
    }

    html[data-page="scroll_paper"] .story-body {
        display: flex;
        flex-direction: column;
        gap: 10px;
        padding: 16px 18px 20px;
        min-height: var(--card-body-min);
    }

    html[data-page="scroll_paper"] .story-title {
        margin: 0;
        font-size: clamp(18px, 2.2vw, 20px);
        font-weight: 800;
        line-height: 1.2;
        color: var(--paper-text);
        min-height: calc(var(--card-title-minlines) * 1.2em);
        display: -webkit-box;
        line-clamp: var(--card-title-minlines);
        -webkit-line-clamp: var(--card-title-minlines);
        -webkit-box-orient: vertical;
        overflow: hidden;
    }

    html[data-page="scroll_paper"] .story-title a {
        text-decoration: none;
        color: inherit;
        cursor: var(--cursor-pointer);
    }

    html[data-page="scroll_paper"] .story-title a:hover {
        color: var(--blue-400);
    }

    html[data-page="scroll_paper"] .story-blurb {
        margin: 0;
        color: var(--paper-muted);
        font-size: 0.95rem;
        line-height: 1.5;
        display: -webkit-box;
        line-clamp: var(--card-blurb-lines);
        -webkit-line-clamp: var(--card-blurb-lines);
        -webkit-box-orient: vertical;
        overflow: hidden;
        min-height: calc(1.5em * var(--card-blurb-lines));
    }

    html[data-page="scroll_paper"] .hero-ctas {
        display: flex;
        gap: 12px;
        flex-wrap: wrap;
        margin-top: auto;
    }

    html[data-page="scroll_paper"] .hero-ctas .btn {
        position: relative;
        z-index: 10;
        pointer-events: auto;
    }

    html[data-page="scroll_paper"] .carousel-controls {
        pointer-events: none;
    }

    html[data-page="scroll_paper"] .carousel-prev,
    html[data-page="scroll_paper"] .carousel-next {
        position: absolute;
        top: 50%;
        transform: translateY(-50%);
        width: 40px;
        height: 40px;
        border-radius: 50%;
        background: rgba(11, 15, 20, 0.9);
        -webkit-backdrop-filter: blur(6px);
        backdrop-filter: blur(6px);
        border: 1px solid var(--paper-border);
        color: var(--paper-text);
        cursor: var(--cursor-pointer);
        pointer-events: auto;
        z-index: 20;
    }

    html[data-page="scroll_paper"] .carousel-prev {
        left: 12px;
    }

    html[data-page="scroll_paper"] .carousel-next {
        right: 12px;
    }

    html[data-page="scroll_paper"] .carousel-prev:hover,
    html[data-page="scroll_paper"] .carousel-next:hover,
    html[data-page="scroll_paper"] .carousel-prev:focus-visible,
    html[data-page="scroll_paper"] .carousel-next:focus-visible {
        background: var(--primary-soft);
        border-color: var(--blue-400);
        box-shadow: var(--focus);
    }

    html[data-page="scroll_paper"] .carousel-pagination {
        display: flex;
        justify-content: center;
        gap: 12px;
        margin-top: 16px;
    }

    html[data-page="scroll_paper"] .carousel-dot {
        width: 10px;
        height: 10px;
        border-radius: 50%;
        background: linear-gradient(90deg, var(--primary), var(--secondary));
        border: 0;
        opacity: 0.5;
        cursor: var(--cursor-pointer);
    }

    html[data-page="scroll_paper"] .carousel-dot[aria-selected="true"] {
        opacity: 1;
        box-shadow: var(--focus);
    }

    html[data-page="scroll_paper"] .carousel-dot:focus-visible {
        box-shadow: var(--focus);
        outline: none;
    }

    html[data-page="scroll_paper"] .newspaper {
        background: var(--paper-bg);
        border: 1px solid var(--paper-border);
        border-radius: var(--paper-radius);
        padding: 20px;
        box-shadow: var(--paper-shadow);
    }

    html[data-page="scroll_paper"] .newspaper h2 {
        font-family: 'Bitcount Grid Double Ink', system-ui, -apple-system, 'Segoe UI', Roboto, Ubuntu, Cantarell, 'Helvetica Neue', Arial, 'Noto Sans';
        font-size: clamp(24px, 4vw, 36px);
        font-weight: 900;
        line-height: 1.1;
        margin: 0 0 16px 0;
        background: linear-gradient(180deg, var(--paper-text) 0%, var(--blue-400) 100%);
        -webkit-background-clip: text;
        background-clip: text;
        color: transparent;
        text-align: center;
    }

    html[data-page="scroll_paper"] .newspaper-article {
        column-count: 3;
        column-gap: var(--paper-column-gap);
        column-rule: var(--paper-column-rule);
        margin-bottom: 16px;
    }

    html[data-page="scroll_paper"] .newspaper-article article {
        break-inside: avoid;
        margin-bottom: 16px;
    }

    html[data-page="scroll_paper"] .newspaper-article h3 {
        font-size: clamp(18px, 2.2vw, 22px);
        font-weight: 800;
        line-height: 1.2;
        margin: 0 0 8px 0;
        color: var(--paper-text);
    }

    html[data-page="scroll_paper"] .newspaper-article p {
        margin: 0 0 8px 0;
        color: var(--paper-muted);
        font-size: 0.95rem;
        line-height: 1.6;
    }

    html[data-page="scroll_paper"] .newspaper-article ul {
        margin: 8px 0 0 0;
        padding-left: 1.2rem;
        color: var(--paper-text);
        font-size: 0.95rem;
        line-height: 1.5;
    }

    html[data-page="scroll_paper"] .newspaper-article blockquote {
        margin: 8px 0;
        padding-left: 12px;
        border-left: 3px solid var(--blue-400);
        color: var(--paper-text);
        font-style: italic;
        font-size: 0.95rem;
    }

    html[data-page="scroll_paper"] .newspaper-article a {
        color: var(--primary);
        text-decoration: underline;
        text-underline-offset: 2px;
        transition: var(--transition);
        cursor: var(--cursor-pointer);
    }

    html[data-page="scroll_paper"] .newspaper-article a:hover {
        color: var(--blue-400);
    }

    html[data-page="scroll_paper"] .apoboiz-img,
    html[data-page="scroll_paper"] .graduation-img {
        width: 100%;
        height: auto;
        margin-top: 8px;
        border-radius: var(--paper-radius);
        box-shadow: var(--paper-shadow);
    }

    /* =========================
       FIX: mokutme fills desktop width
       ========================= */
    html[data-page="scroll_paper"] .newspaper-article .mokutme {
        /* Make the article escape the newspaper columns and take full row width */
        column-span: all;
        break-inside: avoid;
        width: 100%;

        /* Two-column content layout on desktop */
        display: grid;
        grid-template-columns: 3fr 2fr;
        /* text | media */
        gap: 24px;
        align-items: start;

        padding: 16px;
        border: 1px solid var(--paper-border);
        border-radius: var(--paper-radius);
        background: var(--paper-bg);
        box-shadow: var(--paper-shadow);
        max-width: 100%;
    }

    html[data-page="scroll_paper"] .mokutme-text-wrap,
    html[data-page="scroll_paper"] .mokutme-img-wrap {
        display: block;
    }

    html[data-page="scroll_paper"] .mokutme-text-wrap h3 {
        margin: 0 0 8px 0;
        font-size: clamp(18px, 2.2vw, 22px);
        font-weight: 800;
        line-height: 1.2;
        color: var(--paper-text);
    }

    html[data-page="scroll_paper"] .mokutme-text-wrap p {
        margin: 0 0 8px 0;
        color: var(--paper-muted);
        font-size: 0.95rem;
        line-height: 1.6;
        max-width: 75ch;
        /* pleasant measure even when stretched */
    }

    html[data-page="scroll_paper"] .mokutme-img-wrap {
        border-radius: var(--paper-radius);
        overflow: hidden;
        align-self: start;
    }

    html[data-page="scroll_paper"] .mokutme-img {
        width: 100%;
        height: 100%;
        aspect-ratio: 4/3;
        /* balanced, prevents collapse */
        object-fit: cover;
        /* fill without letterboxing */
        border-radius: var(--paper-radius);
        box-shadow: var(--paper-shadow);
        display: block;
    }

    html[data-page="scroll_paper"] .newspaper .hero-ctas {
        display: flex;
        justify-content: center;
    }

    html[data-page="scroll_paper"] .newspaper .btn {
        z-index: 10;
        pointer-events: auto;
    }

    @media (min-width: 1024px) {
        html[data-page="scroll_paper"] {
            --card-body-min: 220px;
            --card-title-minlines: 2;
            --card-blurb-lines: 3;
        }
    }

    @media (min-width: 1280px) {
        html[data-page="scroll_paper"] {
            --card-body-min: 240px;
        }

        /* Give the text a little more room on very wide screens */
        html[data-page="scroll_paper"] .newspaper-article .mokutme {
            grid-template-columns: 7fr 5fr;
            /* ~58% | 42% */
        }
    }

    @media (max-width: 1024px) {
        html[data-page="scroll_paper"] .carousel-slide {
            flex-basis: calc(75% - var(--card-gap) / 2);
        }

        html[data-page="scroll_paper"] .newspaper-article {
            column-count: 2;
        }

        html[data-page="scroll_paper"] .newspaper-article .mokutme {
            grid-template-columns: 1fr;
            /* stack */
        }

        html[data-page="scroll_paper"] .mokutme-img {
            aspect-ratio: 16/9;
        }
    }

    @media (max-width: 639.98px) {
        html[data-page="scroll_paper"] .carousel-slide {
            flex-basis: 100%;
        }

        html[data-page="scroll_paper"] .newspaper-article {
            column-count: 1;
        }

        html[data-page="scroll_paper"] .newspaper {
            padding: 16px;
        }

        html[data-page="scroll_paper"] .newspaper h2 {
            font-size: clamp(20px, 5vw, 28px);
        }

        html[data-page="scroll_paper"] .mokutme {
            padding: 10px;
        }
    }

    @media (max-width: 420px) {

        html[data-page="scroll_paper"] .carousel-prev,
        html[data-page="scroll_paper"] .carousel-next {
            width: 36px;
            height: 36px;
        }

        html[data-page="scroll_paper"] #story-heading {
            font-size: clamp(24px, 6vw, 36px);
        }

        html[data-page="scroll_paper"] .enjoychain,
        html[data-page="scroll_paper"] .goated {
            width: 40px;
            height: 40px;
        }

        html[data-page="scroll_paper"] .goated {
            margin-left: 20px;
        }
    }

    @media (prefers-reduced-motion: reduce) {

        html[data-page="scroll_paper"] .carousel-track,
        html[data-page="scroll_paper"] .story-card,
        html[data-page="scroll_paper"] .carousel-prev,
        html[data-page="scroll_paper"] .carousel-next,
        html[data-page="scroll_paper"] .carousel-dot,
        html[data-page="scroll_paper"] .newspaper {
            transition: none !important;
        }

        html[data-page="scroll_paper"] .view-subtitle::after {
            animation: none;
        }
    }
}