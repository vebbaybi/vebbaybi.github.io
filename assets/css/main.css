/* =======================================================================================
    1807 - MAIN.CSS (FINAL â€” THEMED FOUNDATION)
    Scope: Reset, Color Tokens, Theme Logic, Base Typography, Global Layout Fixes
    (REVISED: OPAQUE BLUE THEME, FOCUSED ON MAIN CONTENT READABILITY)
    ======================================================================================= */

@layer reset, base, components, navigation, motion, overrides;

/* ===== Reset ===== */
@layer reset {

    *,
    *::before,
    *::after {
        box-sizing: border-box;
    }

    html {
        height: 100%;
    }

    body {
        min-height: 100vh;
        margin: 0;
        display: flex;
        flex-direction: column;
    }
}


/* ===== Tokens & Theme Variables (OPAQUE BLUE THEME) ===== */
:root {
    /* -------------------------------------
     * 1. BASE COLOR PALETTE (Blue Theme, Opaque Backgrounds)
     * ------------------------------------- */

    --color-accent: #2489f6;
    --color-text-day: #1f1f1f;
    --color-text-night: #f0f0f0;
    --color-bg-day: #f8f8f8;
    --color-bg-night: #0a192f;
    --color-secondary-night: #172a46;

    /* Mapped Variables (Simplified) */
    --color-1: var(--color-accent);
    --color-2: var(--color-accent);
    --color-3: var(--color-accent);
    --color-4: var(--color-text-day);
    --color-5: var(--color-bg-day);
    --color-6: var(--color-text-night);
    --color-7: var(--color-text-day);
    --color-8: var(--color-bg-night);

    /* -------------------------------------
     * 2. SEMANTIC VARIABLES (Day Theme Default - Focus on Contrast)
     * ------------------------------------- */
    --primary-bg: var(--color-5);
    --secondary-bg: var(--color-2);
    --primary-text: var(--color-4);
    --secondary-text: var(--color-1);
    --accent-color: var(--color-3);

    --primary-strong: #be123c;
    --primary-soft: rgba(225, 29, 72, .12);
    --border: rgba(30, 30, 30, .12);
    --shadow: 0 4px 20px rgba(0, 0, 0, .08);

    --blue-400: #60a5fa;
    --primary: var(--color-accent);
    --muted: #808080;

    /* -------------------------------------
     * 3. LAYOUT & UTILITY TOKENS
     * ------------------------------------- */
    --header-height: 70px;
    --footer-height: 60px;

    --radius: 16px;
    --radius-md: 10px;
    --radius-lg: 20px;
    --radius-xl: 30px;
    --radius-pill: 9999px;

    --container: 1600px;
    --transition: all .15s ease;
    --focus: 0 0 0 3px rgba(36, 137, 246, .45);
    /* Adjusted focus to accent blue */

    --font-size-base: 16px;
    --line-height-base: 1.6;

    /* Cursor definitions */
    --cursor-default: url('/assets/cursors/default.png') 6 6, auto;
    --cursor-pointer: url('/assets/cursors/pointer.png') 6 6, pointer;
    --cursor-editor: url('/assets/cursors/editor.png') 6 6, text;
    --cursor-typing: url('/assets/cursors/typing.png') 6 6, text;
}

/* ===== Theme Logic (JS-Controlled Dark Mode) ===== */
@layer base {

    /*
     * NIGHT THEME OVERRIDES (Deep Navy Blue Theme)
     */
    body.theme-dark {
        --primary-bg: var(--color-8);
        --secondary-bg: var(--color-secondary-night);
        --primary-text: var(--color-6);
        --secondary-text: var(--color-1);
        --border: rgba(255, 255, 255, .12);
        --shadow: 0 4px 20px rgba(0, 0, 0, .4);
        --primary-soft: rgba(225, 29, 72, .1);
        --focus: 0 0 0 3px rgba(36, 137, 246, .5);
    }
}

/* ===== Base Styles ===== */
@layer base {
    body {
        font-family: system-ui, -apple-system, "Segoe UI", Roboto, Ubuntu, Cantarell, "Helvetica Neue", Arial, sans-serif;
        font-size: var(--font-size-base);
        line-height: var(--line-height-base);
        /* Now uses OPAQUE background colors */
        background: var(--primary-bg);
        /* Focus is here: High contrast text colors for main content */
        color: var(--primary-text);
        cursor: var(--cursor-default);
        -webkit-font-smoothing: antialiased;
        text-rendering: optimizeLegibility;
    }

    main {
        flex: 1 0 auto;
        width: 100%;

        padding-top: var(--header-height);
        padding-bottom: var(--footer-height);

        scroll-padding-top: var(--header-height);
    }

    a {
        color: var(--primary);
        text-decoration: none;
        text-underline-offset: 3px;
        transition: var(--transition);
        cursor: var(--cursor-pointer);
    }

    a:hover {
        color: var(--blue-400);
    }

    img {
        max-width: 100%;
        display: block;
    }

    p,
    span,
    h1,
    h2,
    h3,
    h4,
    h5,
    h6 {
        cursor: var(--cursor-editor);
    }

    input,
    textarea {
        cursor: var(--cursor-typing);
    }

    .container {
        width: min(100% - 24px, var(--container));
        margin-inline: auto;
        padding-inline: auto;
    }

    .sr-only {
        position: absolute;
        width: 1px;
        height: 1px;
        padding: 0;
        margin: -1px;
        overflow: hidden;
        clip: rect(0, 0, 0, 0);
        white-space: nowrap;
        border: 0;
    }

    .skip-link {
        position: absolute;
        left: -9999px;
        top: auto;
        width: 1px;
        height: 1px;
        overflow: hidden;
    }

    .skip-link:focus {
        position: fixed;
        left: 16px;
        top: 16px;
        width: auto;
        height: auto;
        padding: 8px 12px;
        background: var(--primary);
        color: #fff;
        z-index: 9999;
        border-radius: var(--radius);
        outline: none;
        cursor: var(--cursor-pointer);
    }
}

/* ===== Utils ===== */
@layer base {
    #typing-area {
        cursor: var(--cursor-typing);
    }

    [tabindex="0"],
    [role="button"] {
        cursor: var(--cursor-pointer);
    }
}

/* ===== Responsive Layout Adjustments ===== */
@layer base {

    @media (max-width: 768px) {
        :root {
            --header-height: 56px;
            --footer-height: 48px;
        }
    }
}

/* ===== Motion & DPI ===== */
@layer motion {
    @media (prefers-reduced-motion: reduce) {

        *,
        *::before,
        *::after {
            transition: none !important;
        }
    }
}

@layer base {
    @media (min-resolution: 2dppx) {
        :root {
            --cursor-default: url('/assets/cursors/default@2x.png') 6 6, auto;
            --cursor-pointer: url('/assets/cursors/pointer@2x.png') 6 6, pointer;
            --cursor-editor: url('/assets/cursors/editor@2x.png') 6 6, text;
            --cursor-typing: url('/assets/cursors/typing@2x.png') 6 6, text;
        }
    }
}